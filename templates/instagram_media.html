<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Instagram Media</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif; background: #f7f7fa; }
        .media-list { display: flex; flex-wrap: wrap; gap: 20px; margin: 30px auto; justify-content: center; }
        .media-item { background: #fff; border-radius: 10px; box-shadow: 0 2px 8px #0001; padding: 16px; width: 260px; text-align: center; }
        .media-item img, .media-item video { max-width: 220px; max-height: 220px; border-radius: 8px; }
        .download-btn { display: inline-block; margin-top: 10px; padding: 7px 18px; background: #007bff; color: #fff; border: none; border-radius: 4px; text-decoration: none; }
        .download-btn:hover { background: #0056b3; }
        .caption { color: #444; margin: 10px 0 0 0; font-size: 1em; }
    </style>
</head>
<body>
    <h2 style="text-align:center; color:#007bff;">Your Instagram Posts & Reels</h2>
    <div class="media-list">
        {% for m in media %}
            <div class="media-item">
                {% if m.media_type == "IMAGE" or m.media_type == "CAROUSEL_ALBUM" %}
                    <img src="{{ m.media_url }}" alt="Media">
                {% elif m.media_type == "VIDEO" %}
                    <video controls>
                        <source src="{{ m.media_url }}">
                        Your browser does not support the video tag.
                    </video>
                {% endif %}
                <div class="caption">{{ m.caption or "" }}</div>
                <a class="download-btn" href="{{ m.media_url }}" download>Download</a>
                <div style="margin-top:8px;">
                    <a href="{{ m.permalink }}" target="_blank" style="font-size:0.95em; color:#888;">View on Instagram</a>
                </div>
            </div>
        {% endfor %}
    </div>
</body>
</html>
